[{"E:\\dev\\node\\airmixx\\src\\App.tsx":"1","E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\MainLayout.tsx":"2","E:\\dev\\node\\airmixx\\src\\SharedComponents\\MobileMenu\\MobileMenu.tsx":"3","E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\AdminHeader\\AdminHeader.tsx":"4","E:\\dev\\node\\airmixx\\src\\Redux\\actions\\modal.tsx":"5","E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\Pages\\AdminAuth\\AdminAuth.tsx":"6","E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\Pages\\AdminProducts\\AdminProducts.tsx":"7","E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\index.tsx":"8","E:\\dev\\node\\airmixx\\src\\Redux\\actions\\app.tsx":"9","E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\modal.tsx":"10","E:\\dev\\node\\airmixx\\src\\SharedComponents\\ChangeProductForm\\ChangeProductForm.tsx":"11","E:\\dev\\node\\airmixx\\src\\SharedComponents\\PropertyReferenceCard\\PropertyReferenceCard.tsx":"12","E:\\dev\\node\\airmixx\\src\\SharedComponents\\UploadFileCard\\UploadFileCard.tsx":"13","E:\\dev\\node\\airmixx\\src\\SharedComponents\\LoaderHorizontal\\LoaderHorizontal.tsx":"14","E:\\dev\\node\\airmixx\\src\\SharedComponents\\AuthorityForm\\AuthorityForm.tsx":"15","E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\MainFooter\\MainFooter.tsx":"16","E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\Pages\\Main\\Main.tsx":"17","E:\\dev\\node\\airmixx\\src\\Redux\\constants\\ActionTypes.tsx":"18","E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\app.tsx":"19","E:\\dev\\node\\airmixx\\src\\SharedComponents\\ModalWindow\\ModalWindow.tsx":"20","E:\\dev\\node\\airmixx\\src\\SharedComponents\\SelectSearchComponent\\SelectSearchComponent.tsx":"21","E:\\dev\\node\\airmixx\\src\\SharedComponents\\InputNumberFormat\\InputNumberFormat.tsx":"22","E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\Pages\\Components\\Contacts\\Contacts.tsx":"23"},{"size":1392,"mtime":1631722926327,"results":"24","hashOfConfig":"25"},{"size":959,"mtime":1631722926339,"results":"26","hashOfConfig":"25"},{"size":2776,"mtime":1631722926371,"results":"27","hashOfConfig":"25"},{"size":3999,"mtime":1631722926330,"results":"28","hashOfConfig":"25"},{"size":488,"mtime":1631722926343,"results":"29","hashOfConfig":"25"},{"size":606,"mtime":1631722926332,"results":"30","hashOfConfig":"25"},{"size":3429,"mtime":1631722926334,"results":"31","hashOfConfig":"25"},{"size":190,"mtime":1631722926353,"results":"32","hashOfConfig":"25"},{"size":1250,"mtime":1631722926343,"results":"33","hashOfConfig":"25"},{"size":1175,"mtime":1631722926353,"results":"34","hashOfConfig":"25"},{"size":18674,"mtime":1631722926358,"results":"35","hashOfConfig":"25"},{"size":2977,"mtime":1631722926378,"results":"36","hashOfConfig":"25"},{"size":1533,"mtime":1631722926381,"results":"37","hashOfConfig":"25"},{"size":520,"mtime":1631722926369,"results":"38","hashOfConfig":"25"},{"size":6946,"mtime":1631722926355,"results":"39","hashOfConfig":"25"},{"size":1089,"mtime":1631728887403,"results":"40","hashOfConfig":"25"},{"size":418,"mtime":1631730014956,"results":"41","hashOfConfig":"25"},{"size":840,"mtime":1631722926344,"results":"42","hashOfConfig":"25"},{"size":1488,"mtime":1631722926352,"results":"43","hashOfConfig":"25"},{"size":1549,"mtime":1631722926372,"results":"44","hashOfConfig":"25"},{"size":1069,"mtime":1631722926379,"results":"45","hashOfConfig":"25"},{"size":1336,"mtime":1631722926364,"results":"46","hashOfConfig":"25"},{"size":996,"mtime":1631730789999,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"12frbqd",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"E:\\dev\\node\\airmixx\\src\\App.tsx",[],["96","97"],"E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\MainLayout.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\MobileMenu\\MobileMenu.tsx",[],"E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\AdminHeader\\AdminHeader.tsx",["98","99"],"E:\\dev\\node\\airmixx\\src\\Redux\\actions\\modal.tsx",[],"E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\Pages\\AdminAuth\\AdminAuth.tsx",[],"E:\\dev\\node\\airmixx\\src\\Layouts\\AdminLayout\\Pages\\AdminProducts\\AdminProducts.tsx",["100"],"E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\index.tsx",[],"E:\\dev\\node\\airmixx\\src\\Redux\\actions\\app.tsx",[],"E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\modal.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\ChangeProductForm\\ChangeProductForm.tsx",["101","102","103"],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\PropertyReferenceCard\\PropertyReferenceCard.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\UploadFileCard\\UploadFileCard.tsx",["104"],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\LoaderHorizontal\\LoaderHorizontal.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\AuthorityForm\\AuthorityForm.tsx",["105"],"import React, { useEffect, useState } from 'react'\r\nimport { Button, Container, Form } from 'react-bootstrap'\r\nimport './AuthorityForm.scss'\r\nimport { useForm } from 'react-hook-form'\r\nimport { OutAuthAdminData } from '../../Redux/interfaces/AdditionalInterfaces/OutAuthAdminData'\r\nimport { connect } from 'react-redux'\r\nimport { RootState } from '../../Redux'\r\nimport { setAppMarketUser, setAppLoading } from '../../Redux/actions/app'\r\nimport { MarketUser } from '../../Redux/interfaces/AdditionalInterfaces/MarketUser'\r\nimport { AppState } from '../../Redux/interfaces/interfaces'\r\nimport { Config } from '../../Config/Config'\r\nimport axios from 'axios'\r\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\r\nimport LoaderCircle from '../LoaderCircle/LoaderCircle'\r\nimport LoaderHorizontal from '../LoaderHorizontal/LoaderHorizontal'\r\n\r\ninterface MatchParams {\r\n  id: string\r\n}\r\n\r\ninterface AuthorityFormProps extends RouteComponentProps<MatchParams> {\r\n  setAppMarketUser: (marketUser: MarketUser) => void\r\n  setAppLoading: (loading: boolean) => void\r\n  app: AppState\r\n}\r\n\r\ninterface FormValues {\r\n  email: string\r\n  password: string\r\n}\r\n\r\nconst AuthorityForm = (props: AuthorityFormProps) => {\r\n  const [formLoader, setFormLoader] = useState(true)\r\n\r\n  const [formAdditionalErrors, setFormAdditionalErrors] = useState({\r\n    buttonLoading: false,\r\n    formError: '',\r\n    requiredMessageText: 'Обязательное поле для заполнения',\r\n    minLengthMessageText: 'Ввведено недостаточное кол-во символов',\r\n    patternMessageText: 'Неверный формат данных',\r\n  })\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<FormValues>()\r\n\r\n  useEffect(() => {\r\n    const marketUser = localStorage.getItem('marketUser')\r\n    if (marketUser) {\r\n      const apiToken = JSON.parse(marketUser).apiToken\r\n      checkAuth(apiToken)\r\n    } else {\r\n      setFormLoader(false)\r\n    }\r\n  }, [])\r\n\r\n  const checkAuth = async (apiToken: string): Promise<any> => {\r\n    const api = axios.create({\r\n      baseURL: Config.backConnectData.backendURL,\r\n      withCredentials: true,\r\n      headers: {\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n    })\r\n\r\n    await api\r\n      .get('/api/admin/checkAuth')\r\n      .then((res) => {\r\n        const marketUser: MarketUser = {\r\n          apiToken,\r\n          name: res.data.user.name,\r\n          email: res.data.user.email,\r\n          id: res.data.user.id,\r\n          admin: res.data.user.admin,\r\n        }\r\n        props.setAppMarketUser(marketUser)\r\n        localStorage.setItem('marketUser', JSON.stringify(marketUser))\r\n        res.data && props.history.push('/admin')\r\n      })\r\n      .catch((error) => {\r\n        setFormError('Ошибка связи с серверной частью приложения')\r\n        setFormLoader(false)\r\n      })\r\n  }\r\n\r\n  const setFormError = (error: string): void => {\r\n    setFormAdditionalErrors({ ...formAdditionalErrors, formError: error })\r\n  }\r\n\r\n  const handleClick = (data: OutAuthAdminData): void => {\r\n    setFormAdditionalErrors((prevState) => {\r\n      prevState.buttonLoading = true\r\n      return prevState\r\n    })\r\n    setFormError('')\r\n    authRequest(data)\r\n  }\r\n\r\n  const authRequest = async (data: OutAuthAdminData): Promise<any> => {\r\n    const api = axios.create({\r\n      baseURL: Config.backConnectData.backendURL,\r\n      withCredentials: true,\r\n    })\r\n\r\n    await api\r\n      .post('/api/admin/login', data)\r\n      .then((res) => {\r\n        if (res.status === 200 && res.data.apiToken) {\r\n          const marketUser: MarketUser = {\r\n            apiToken: res.data.apiToken,\r\n            name: res.data.user.name,\r\n            email: res.data.user.email,\r\n            id: res.data.user.id,\r\n            admin: res.data.user.admin,\r\n          }\r\n          props.setAppMarketUser(marketUser)\r\n\r\n          localStorage.setItem('marketUser', JSON.stringify(marketUser))\r\n\r\n          props.history.push('/admin')\r\n        } else {\r\n          setFormError('Ошибка авторизации')\r\n          // console.log(res)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setFormError('Ошибка связи с серверной частью приложения')\r\n        console.log(error)\r\n      })\r\n\r\n    setFormAdditionalErrors((prevState) => ({ ...prevState, buttonLoading: false }))\r\n  }\r\n\r\n  // console.log(errors)\r\n\r\n  return (\r\n    <Container fluid className=\"AuthorityForm\">\r\n      {formLoader ? (\r\n        <LoaderCircle />\r\n      ) : (\r\n        <div className=\"AuthorityForm_card\">\r\n          <Form>\r\n            <Form.Group controlId=\"formBasicEmail\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                placeholder=\"Введите email\"\r\n                {...register('email', {\r\n                  required: { value: true, message: formAdditionalErrors.requiredMessageText },\r\n                  minLength: { value: 5, message: formAdditionalErrors.minLengthMessageText },\r\n                  pattern: { value: /^\\S+@\\S+$/i, message: formAdditionalErrors.patternMessageText },\r\n                })}\r\n              />\r\n\r\n              {errors.email && <Form.Text className=\"text-danger\">{errors.email.message}</Form.Text>}\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formBasicPassword\">\r\n              <Form.Label>Пароль</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Введите Пароль\"\r\n                {...register('password', {\r\n                  required: { value: true, message: formAdditionalErrors.requiredMessageText },\r\n                  minLength: { value: 6, message: formAdditionalErrors.minLengthMessageText },\r\n                })}\r\n              />\r\n\r\n              {errors.password && <Form.Text className=\"text-danger\">{errors.password.message}</Form.Text>}\r\n            </Form.Group>\r\n\r\n            {formAdditionalErrors.formError !== '' ? (\r\n              <div className=\"AuthorityForm__formError\">\r\n                <Form.Text className=\"text-danger\">{formAdditionalErrors.formError}</Form.Text>\r\n              </div>\r\n            ) : null}\r\n            {formAdditionalErrors.buttonLoading ? (\r\n              <LoaderHorizontal />\r\n            ) : (\r\n              <Button variant=\"primary\" type=\"button\" size=\"lg\" onClick={handleSubmit((data) => handleClick(data))}>\r\n                Войти\r\n              </Button>\r\n            )}\r\n          </Form>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setAppMarketUser,\r\n  setAppLoading,\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const app = state.app\r\n  const toast = state.toast\r\n  return {\r\n    app,\r\n    toast,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(AuthorityForm))\r\n","E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\MainFooter\\MainFooter.tsx",["106"],"E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\Pages\\Main\\Main.tsx",[],"E:\\dev\\node\\airmixx\\src\\Redux\\constants\\ActionTypes.tsx",[],"E:\\dev\\node\\airmixx\\src\\Redux\\reducers\\app.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\ModalWindow\\ModalWindow.tsx",[],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\SelectSearchComponent\\SelectSearchComponent.tsx",["107"],"E:\\dev\\node\\airmixx\\src\\SharedComponents\\InputNumberFormat\\InputNumberFormat.tsx",[],"E:\\dev\\node\\airmixx\\src\\Layouts\\MainLayout\\Pages\\Components\\Contacts\\Contacts.tsx",[],{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","severity":1,"message":"113","line":2,"column":17,"nodeType":"114","messageId":"115","endLine":2,"endColumn":26},{"ruleId":"112","severity":1,"message":"116","line":33,"column":23,"nodeType":"114","messageId":"115","endLine":33,"endColumn":34},{"ruleId":"117","severity":1,"message":"118","line":65,"column":6,"nodeType":"119","endLine":65,"endColumn":8,"suggestions":"120"},{"ruleId":"112","severity":1,"message":"121","line":21,"column":8,"nodeType":"114","messageId":"115","endLine":21,"endColumn":20},{"ruleId":"112","severity":1,"message":"122","line":21,"column":24,"nodeType":"114","messageId":"115","endLine":21,"endColumn":35},{"ruleId":"117","severity":1,"message":"123","line":52,"column":6,"nodeType":"119","endLine":52,"endColumn":8,"suggestions":"124"},{"ruleId":"112","severity":1,"message":"113","line":1,"column":17,"nodeType":"114","messageId":"115","endLine":1,"endColumn":26},{"ruleId":"117","severity":1,"message":"125","line":57,"column":6,"nodeType":"119","endLine":57,"endColumn":8,"suggestions":"126"},{"ruleId":"127","severity":1,"message":"128","line":23,"column":43,"nodeType":"129","endLine":23,"endColumn":58},{"ruleId":"112","severity":1,"message":"113","line":1,"column":17,"nodeType":"114","messageId":"115","endLine":1,"endColumn":26},"no-native-reassign",["130"],"no-negated-in-lhs",["131"],"@typescript-eslint/no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'setCommands' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getProducts'. Either include it or remove the dependency array.","ArrayExpression",["132"],"'SelectSearch' is defined but never used.","'fuzzySearch' is defined but never used.","React Hook useEffect has a missing dependency: 'getProductCategories'. Either include it or remove the dependency array.",["133"],"React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array.",["134"],"react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute","no-global-assign","no-unsafe-negation",{"desc":"135","fix":"136"},{"desc":"137","fix":"138"},{"desc":"139","fix":"140"},"Update the dependencies array to be: [getProducts]",{"range":"141","text":"142"},"Update the dependencies array to be: [getProductCategories]",{"range":"143","text":"144"},"Update the dependencies array to be: [checkAuth]",{"range":"145","text":"146"},[2344,2346],"[getProducts]",[2849,2851],"[getProductCategories]",[1920,1922],"[checkAuth]"]